!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports&&"function"==typeof require?t(require("jquery")):t(jQuery)}(function(h){"use strict";var i={escapeRegExChars:function(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},createNode:function(t){var e=document.createElement("div");return e.className=t,e.style.position="absolute",e.style.display="none",e}},t=h.noop;function o(t,e){this.element=t,this.el=h(t),this.suggestions=[],this.badQueries=[],this.selectedIndex=-1,this.currentValue=this.element.value,this.timeoutId=null,this.cachedResponse={},this.onChangeTimeout=null,this.onChange=null,this.isLocal=!1,this.suggestionsContainer=null,this.noSuggestionsContainer=null,this.options=h.extend(!0,{},o.defaults,e),this.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},this.hint=null,this.hintValue="",this.selection=null,this.initialize(),this.setOptions(e)}o.utils=i,(h.Autocomplete=o).defaults={ajaxSettings:{},autoSelectFirst:!1,appendTo:"body",serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:function(t,e){if(!e)return t.value;e="("+i.escapeRegExChars(e)+")";return t.value.replace(new RegExp(e,"gi"),"<strong>$1</strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")},formatGroup:function(t,e){return'<div class="autocomplete-group">'+e+"</div>"},delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:t,onSearchComplete:t,onSearchError:t,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(t,e,i){return-1!==t.value.toLowerCase().indexOf(i)},paramName:"query",transformResult:function(t){return"string"==typeof t?h.parseJSON(t):t},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1},o.prototype={initialize:function(){var t,e=this,i="."+e.classes.suggestion,s=e.classes.selected,n=e.options;e.element.setAttribute("autocomplete","off"),e.noSuggestionsContainer=h('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),e.suggestionsContainer=o.utils.createNode(n.containerClass),(t=h(e.suggestionsContainer)).appendTo(n.appendTo||"body"),"auto"!==n.width&&t.css("width",n.width),t.on("mouseover.autocomplete",i,function(){e.activate(h(this).data("index"))}),t.on("mouseout.autocomplete",function(){e.selectedIndex=-1,t.children("."+s).removeClass(s)}),t.on("click.autocomplete",i,function(){e.select(h(this).data("index"))}),t.on("click.autocomplete",function(){clearTimeout(e.blurTimeoutId)}),e.fixPositionCapture=function(){e.visible&&e.fixPosition()},h(window).on("resize.autocomplete",e.fixPositionCapture),e.el.on("keydown.autocomplete",function(t){e.onKeyPress(t)}),e.el.on("keyup.autocomplete",function(t){e.onKeyUp(t)}),e.el.on("blur.autocomplete",function(){e.onBlur()}),e.el.on("focus.autocomplete",function(){e.onFocus()}),e.el.on("change.autocomplete",function(t){e.onKeyUp(t)}),e.el.on("input.autocomplete",function(t){e.onKeyUp(t)})},onFocus:function(){this.fixPosition(),this.el.val().length>=this.options.minChars&&this.onValueChange()},onBlur:function(){var t=this;t.blurTimeoutId=setTimeout(function(){t.hide()},200)},abortAjax:function(){this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null)},setOptions:function(t){t=h.extend({},this.options,t);this.isLocal=Array.isArray(t.lookup),this.isLocal&&(t.lookup=this.verifySuggestionsFormat(t.lookup)),t.orientation=this.validateOrientation(t.orientation,"bottom"),h(this.suggestionsContainer).css({"max-height":t.maxHeight+"px",width:t.width+"px","z-index":t.zIndex}),this.options=t},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){this.disabled=!0,clearTimeout(this.onChangeTimeout),this.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var t,e,i,s,n,o,a,u,r=h(this.suggestionsContainer),l=r.parent().get(0);l!==document.body&&!this.options.forceFixPosition||(o=this.options.orientation,u=r.outerHeight(),a=this.el.outerHeight(),t={top:(n=this.el.offset()).top,left:n.left},"auto"===o&&(e=h(window).height(),s=-(i=h(window).scrollTop())+n.top-u,n=i+e-(n.top+a+u),o=Math.max(s,n)===s?"top":"bottom"),t.top+="top"===o?-u:a,l!==document.body&&(u=r.css("opacity"),this.visible||r.css("opacity",0).show(),a=r.offsetParent().offset(),t.top-=a.top,t.top+=l.scrollTop,t.left-=a.left,this.visible||r.css("opacity",u).hide()),"auto"===this.options.width&&(t.width=this.el.outerWidth()+"px"),r.css(t))},isCursorAtEnd:function(){var t=this.el.val().length,e=this.element.selectionStart;return"number"==typeof e?e===t:!document.selection||((e=document.selection.createRange()).moveStart("character",-t),t===e.text.length)},onKeyPress:function(t){if(this.disabled||this.visible||40!==t.which||!this.currentValue){if(!this.disabled&&this.visible){switch(t.which){case 27:this.el.val(this.currentValue),this.hide();break;case 39:if(this.hint&&this.options.onHint&&this.isCursorAtEnd()){this.selectHint();break}return;case 9:if(this.hint&&this.options.onHint)return void this.selectHint();if(-1===this.selectedIndex)return void this.hide();if(this.select(this.selectedIndex),!1===this.options.tabDisabled)return;break;case 13:if(-1===this.selectedIndex)return void this.hide();this.select(this.selectedIndex);break;case 38:this.moveUp();break;case 40:this.moveDown();break;default:return}t.stopImmediatePropagation(),t.preventDefault()}}else this.suggest()},onKeyUp:function(t){var e=this;if(!e.disabled){switch(t.which){case 38:case 40:return}clearTimeout(e.onChangeTimeout),e.currentValue!==e.el.val()&&(e.findBestHint(),0<e.options.deferRequestBy?e.onChangeTimeout=setTimeout(function(){e.onValueChange()},e.options.deferRequestBy):e.onValueChange())}},onValueChange:function(){var t,e,i;this.ignoreValueChange?this.ignoreValueChange=!1:(t=this.options,e=this.el.val(),i=this.getQuery(e),this.selection&&this.currentValue!==i&&(this.selection=null,(t.onInvalidateSelection||h.noop).call(this.element)),clearTimeout(this.onChangeTimeout),this.currentValue=e,this.selectedIndex=-1,t.triggerSelectOnValidInput&&this.isExactMatch(i)?this.select(0):i.length<t.minChars?this.hide():this.getSuggestions(i))},isExactMatch:function(t){var e=this.suggestions;return 1===e.length&&e[0].value.toLowerCase()===t.toLowerCase()},getQuery:function(t){var e=this.options.delimiter;return e?(e=t.split(e),h.trim(e[e.length-1])):t},getSuggestionsLocal:function(e){var t=this.options,i=e.toLowerCase(),s=t.lookupFilter,n=parseInt(t.lookupLimit,10),t={suggestions:h.grep(t.lookup,function(t){return s(t,e,i)})};return n&&t.suggestions.length>n&&(t.suggestions=t.suggestions.slice(0,n)),t},getSuggestions:function(s){var t,e,i,n=this,o=n.options,a=o.serviceUrl;o.params[o.paramName]=s,!1!==o.onSearchStart.call(n.element,o.params)&&(i=o.ignoreParams?null:o.params,h.isFunction(o.lookup)?o.lookup(s,function(t){n.suggestions=t.suggestions,n.suggest(),o.onSearchComplete.call(n.element,s,t.suggestions)}):(t=n.isLocal?n.getSuggestionsLocal(s):(h.isFunction(a)&&(a=a.call(n.element,s)),e=a+"?"+h.param(i||{}),n.cachedResponse[e]))&&Array.isArray(t.suggestions)?(n.suggestions=t.suggestions,n.suggest(),o.onSearchComplete.call(n.element,s,t.suggestions)):n.isBadQuery(s)?o.onSearchComplete.call(n.element,s,[]):(n.abortAjax(),i={url:a,data:i,type:o.type,dataType:o.dataType},h.extend(i,o.ajaxSettings),n.currentRequest=h.ajax(i).done(function(t){n.currentRequest=null,t=o.transformResult(t,s),n.processResponse(t,s,e),o.onSearchComplete.call(n.element,s,t.suggestions)}).fail(function(t,e,i){o.onSearchError.call(n.element,s,t,e,i)})))},isBadQuery:function(t){if(!this.options.preventBadQueries)return!1;for(var e=this.badQueries,i=e.length;i--;)if(0===t.indexOf(e[i]))return!0;return!1},hide:function(){var t=h(this.suggestionsContainer);h.isFunction(this.options.onHide)&&this.visible&&this.options.onHide.call(this.element,t),this.visible=!1,this.selectedIndex=-1,clearTimeout(this.onChangeTimeout),h(this.suggestionsContainer).hide(),this.signalHint(null)},suggest:function(){var s,n,o,a,u,r,t,e,i,l,c;this.suggestions.length?(n=this.options,o=n.groupBy,a=n.formatResult,u=this.getQuery(this.currentValue),r=this.classes.suggestion,t=this.classes.selected,e=h(this.suggestionsContainer),i=h(this.noSuggestionsContainer),l=n.beforeRender,c="",n.triggerSelectOnValidInput&&this.isExactMatch(u)?this.select(0):(h.each(this.suggestions,function(t,e){var i;o&&(c+=(i=e.data[o],s===i?"":(s=i,n.formatGroup(e,s)))),c+='<div class="'+r+'" data-index="'+t+'">'+a(e,u,t)+"</div>"}),this.adjustContainerWidth(),i.detach(),e.html(c),h.isFunction(l)&&l.call(this.element,e,this.suggestions),this.fixPosition(),e.show(),n.autoSelectFirst&&(this.selectedIndex=0,e.scrollTop(0),e.children("."+r).first().addClass(t)),this.visible=!0,this.findBestHint())):this.options.showNoSuggestionNotice?this.noSuggestions():this.hide()},noSuggestions:function(){var t=this.options.beforeRender,e=h(this.suggestionsContainer),i=h(this.noSuggestionsContainer);this.adjustContainerWidth(),i.detach(),e.empty(),e.append(i),h.isFunction(t)&&t.call(this.element,e,this.suggestions),this.fixPosition(),e.show(),this.visible=!0},adjustContainerWidth:function(){var t,e=this.options,i=h(this.suggestionsContainer);"auto"===e.width?(t=this.el.outerWidth(),i.css("width",0<t?t:300)):"flex"===e.width&&i.css("width","")},findBestHint:function(){var s=this.el.val().toLowerCase(),n=null;s&&(h.each(this.suggestions,function(t,e){var i=0===e.value.toLowerCase().indexOf(s);return i&&(n=e),!i}),this.signalHint(n))},signalHint:function(t){var e="";t&&(e=this.currentValue+t.value.substr(this.currentValue.length)),this.hintValue!==e&&(this.hintValue=e,this.hint=t,(this.options.onHint||h.noop)(e))},verifySuggestionsFormat:function(t){return t.length&&"string"==typeof t[0]?h.map(t,function(t){return{value:t,data:null}}):t},validateOrientation:function(t,e){return t=h.trim(t||"").toLowerCase(),t=-1===h.inArray(t,["auto","bottom","top"])?e:t},processResponse:function(t,e,i){var s=this.options;t.suggestions=this.verifySuggestionsFormat(t.suggestions),s.noCache||(this.cachedResponse[i]=t,s.preventBadQueries&&!t.suggestions.length&&this.badQueries.push(e)),e===this.getQuery(this.currentValue)&&(this.suggestions=t.suggestions,this.suggest())},activate:function(t){var e=this.classes.selected,i=h(this.suggestionsContainer),s=i.find("."+this.classes.suggestion);return i.find("."+e).removeClass(e),this.selectedIndex=t,-1!==this.selectedIndex&&s.length>this.selectedIndex?(s=s.get(this.selectedIndex),h(s).addClass(e),s):null},selectHint:function(){var t=h.inArray(this.hint,this.suggestions);this.select(t)},select:function(t){this.hide(),this.onSelect(t)},moveUp:function(){if(-1!==this.selectedIndex)return 0===this.selectedIndex?(h(this.suggestionsContainer).children("."+this.classes.suggestion).first().removeClass(this.classes.selected),this.selectedIndex=-1,this.ignoreValueChange=!1,this.el.val(this.currentValue),void this.findBestHint()):void this.adjustScroll(this.selectedIndex-1)},moveDown:function(){this.selectedIndex!==this.suggestions.length-1&&this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(t){var e,i,s,n=this.activate(t);n&&(i=h(n).outerHeight(),s=n.offsetTop,n=(e=h(this.suggestionsContainer).scrollTop())+this.options.maxHeight-i,s<e?h(this.suggestionsContainer).scrollTop(s):n<s&&h(this.suggestionsContainer).scrollTop(s-this.options.maxHeight+i),this.options.preserveInput||(this.ignoreValueChange=!0,this.el.val(this.getValue(this.suggestions[t].value))),this.signalHint(null))},onSelect:function(t){var e=this.options.onSelect,t=this.suggestions[t];this.currentValue=this.getValue(t.value),this.currentValue===this.el.val()||this.options.preserveInput||this.el.val(this.currentValue),this.signalHint(null),this.suggestions=[],this.selection=t,h.isFunction(e)&&e.call(this.element,t)},getValue:function(t){var e,i,s=this.options.delimiter;return!s||1===(i=(e=this.currentValue).split(s)).length?t:e.substr(0,e.length-i[i.length-1].length)+t},dispose:function(){this.el.off(".autocomplete").removeData("autocomplete"),h(window).off("resize.autocomplete",this.fixPositionCapture),h(this.suggestionsContainer).remove()}},h.fn.devbridgeAutocomplete=function(i,s){return arguments.length?this.each(function(){var t=h(this),e=t.data("autocomplete");"string"==typeof i?e&&"function"==typeof e[i]&&e[i](s):(e&&e.dispose&&e.dispose(),e=new o(this,i),t.data("autocomplete",e))}):this.first().data("autocomplete")},h.fn.autocomplete||(h.fn.autocomplete=h.fn.devbridgeAutocomplete)}),function(){"use strict";var n,i,s,o=jQuery;"function"!=typeof o.fn.OrionSearchAutoComplete&&(o.fn.OrionSearchAutoComplete=function(){},i={maxRows:12,suggestionsStack:"",productNameContains:function(t){return o(t).val()||""},modifyResults:function(t){return t},jqueryUI:{noCache:!(n="Orion - Search Auto Complete"),minChars:3,triggerSelectOnValidInput:!0,preventBadQueries:!0,autoSelectFirst:!1,maxHeight:300,width:"auto",zIndex:9999,appendTo:null,forceFixPosition:!0,orientation:"bottom",preserveInput:!1,showNoSuggestionNotice:"",tabDisabled:!1,containerClass:"ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all",beforeRender:function(t,e){},formatResult:function(t,e,i){return'<li class="ui-menu-item" role="menuitem"><a href="'+t.data+'" class="ui-corner-all" tabindex="-1">'+t.text+"</a></li>"},formatGroup:function(t,e){},lookupFilter:function(t,e,i){},onSearchStart:function(t){},onHint:function(t){},onSearchComplete:function(t,e){},transformResult:function(t,e){},onSelect:function(t){},onSearchError:function(t,e,i,s){},onSonHideearchError:function(t){}}},s=function(i,s){s.jqueryUI.lookup=function(t,e){o.ajax({url:"/buscaautocomplete/",dataType:"json",data:{maxRows:s.maxRows,productNameContains:s.productNameContains(i),suggestionsStack:s.suggestionsStack},success:function(t){t&&(t=o.map(t.itemsReturned,function(t){return{data:t.href,value:t.name,text:(t.thumb||"")+" "+t.name,sku:t.items.length?t.items[0].itemId:"",productId:t.items.length?t.items[0].productId:""}}),t=s.modifyResults(t),e({suggestions:t}))},error:function(t,e,i){!function(t,e){if("object"==typeof console&&void 0!==console.error&&void 0!==console.info&&void 0!==console.warn){var i="object"==typeof t&&"function"==typeof t.unshift?(t.unshift("["+n+"]\n"),t):["["+n+"]\n",t];if("alerta"!==e.toLowerCase()&&"aviso"!==e.toLowerCase())if("info"==e.toLowerCase())try{console.info.apply(console,i)}catch(t){try{console.info(i.join("\n"))}catch(t){}}else try{console.error.apply(console,i)}catch(t){try{console.error(i.join("\n"))}catch(t){}}else try{console.warn.apply(console,i)}catch(t){try{console.warn(i.join("\n"))}catch(t){}}}}(i,"[OrionSearchAutoComplete] - Erro na request.")},done:function(){s.suggestionsStack=s.productNameContains(i)}})};try{(o.fn.autocomplete?i.autocomplete("destroy"):i).devbridgeAutocomplete(s.jqueryUI)}catch(i){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Catch (e) - [OrionSearchAutoComplete]: ",i)}},o.fn.OrionSearchAutoComplete=function(e){var t=o(this);return t.length&&t.each(function(){var t=o(this);t.OrionSearchAutoComplete=new s(t,o.extend(!0,{},i,e))}),t})}(jQuery);